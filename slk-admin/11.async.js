(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{MtEq:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var o=n(a("bx4M"));a("g9YV");var i=n(a("wCAj"));a("+L6B");var d=n(a("2/Rp"));a("2qtc");var s=n(a("kLXV")),c=n(a("MVZn"));a("miYZ");var r=n(a("tsqr")),f=n(a("PJYZ"));a("fOrg");var u=n(a("+KLJ")),h=n(a("lwsE")),g=n(a("W8MJ")),y=n(a("a1gu")),m=n(a("Nsbk")),p=n(a("7W2i"));a("OaEy");var v=n(a("2fM7"));a("5NDa");var C,S,_=n(a("5rEg")),x=l(a("q1tI")),k=a("MuoO"),E=n(a("zHco")),b=a("a2tt"),T=_.default.TextArea,q=v.default.Option,A=function(e){function t(){var e,a;(0,h.default)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return a=(0,y.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(l))),a.state={visible:!0},a.handleClose=function(){a.setState({visible:!1})},a}return(0,p.default)(t,e),(0,g.default)(t,[{key:"render",value:function(){return x.default.createElement("div",null,this.state.visible?x.default.createElement(u.default,{message:"\u8bf7\u6ce8\u610f\uff1a\u91cd\u8f7d\u914d\u7f6e\u4f1a\u4ece\u670d\u52a1\u5668\u62c9\u53d6\u914d\u7f6e\u8986\u76d6\u6389\u4fee\u6539\uff0c\u4fee\u6539\u914d\u7f6e\u540e\u8bf7\u624b\u52a8\u70b9\u51fb\u4fdd\u5b58\u6309\u94ae\u786e\u8ba4\u63d0\u4ea4",type:"warning",closable:!0,afterClose:this.handleClose}):null,x.default.createElement("p",null))}}]),t}(x.default.Component),O=(x.default.Component,C=(0,k.connect)(function(e){var t=e.configure,a=e.loading;return{configure:t,loading:a.effects["configure/fetchThirdConfig"]}}),C(S=function(e){function t(e){var a;return(0,h.default)(this,t),a=(0,y.default)(this,(0,m.default)(t).call(this,e)),a.state={thirdConfig:"[]",addVisible:!1,addIconName:"",aqzxUrl:"",aqzxData:"[]",sys_name:"\u8bf7\u9009\u62e9",sys_code:"",sys_api:"",sys_goto:"",sys_icon_name:"",modifyVisible:!1,deleteVisible:!1,icon_name_err:"none"},a.handlerModifyConfig=function(e){console.log(e.target.value),a.setState({thirdConfig:e.target.value})},a.handleFetchThirdConfig=function(e){var t=a.props.dispatch;console.log("handleFetchThirdConfig clicked"),t({type:"configure/fetchThirdConfig",callback:function(){"click"===e&&r.default.success("\u83b7\u53d6\u914d\u7f6e\u6210\u529f",.8)}})},a.handleFetchOwnConfig=function(){var e=a.props.dispatch;console.log("handleFetchOwnConfig clicked"),e({type:"configure/fetchOwnConfig",callback:function(t){console.log(t),a.setState({aqzxUrl:t.aqzxUrl,ownConfig:t}),e({type:"configure/fetchAqzxData",payload:{url:a.state.aqzxUrl},callback:function(e){var t=JSON.stringify(e.result.list);a.setState({aqzxData:t})}})}})},a.handleSaveThirdConfig=function(){var e=a.props.dispatch;e({type:"configure/saveThirdConfig",payload:{config:JSON.parse(a.state.thirdConfig)},callback:function(){r.default.success("\u914d\u7f6e\u4fdd\u5b58\u6210\u529f",.8)}})},a.showAddModal=function(){a.setState({sys_api:"",sys_goto:"",sys_icon_name:""}),a.setState({addVisible:!0})},a.handleAddOk=function(){console.log("~~~~~~~~~~~~"),console.log(a.state.sys_code),console.log("~~~~~~~~~~~~"),""===a.state.sys_code?r.default.warning("\u8bf7\u9009\u62e9\u5f85\u6dfb\u52a0\u5e94\u7528\u5b50\u7cfb\u7edf",.8):a.state.alreadyExist||-1!==a._system_already_exist(a.state.sys_code)?r.default.warning("\u5e94\u7528\u5b50\u7cfb\u7edf\u5df2\u5b58\u5728\uff0c\u8bf7\u52ff\u91cd\u65b0\u6dfb\u52a0",.8):(a.setState({addVisible:!1}),a.addThird(),a.addIcon(),console.log("add ok"))},a.handleAddCancel=function(){a.setState({addVisible:!1,sys_name:"\u8bf7\u9009\u62e9",sys_code:""}),console.log("add cancel")},a.addThird=function(){var e=JSON.parse(a.state.thirdConfig);console.log("---------"),console.log(e),console.log(a.state.sys_name),e.push({name:a.state.sys_name,api:a.state.sys_api,unique:a.state.sys_code,goto:a.state.sys_goto,icon:a.state.sys_icon_name}),a.setState({thirdConfig:b.plain(e)}),a.setState({sys_api:"",sys_goto:"",sys_icon_name:""})},a.addIcon=function(){console.log("need add icon")},a.handleUploadFile=function(e){a.setState({base64img:e})},a.getAqzxAndQuery=function(e){console.log("flash");var t=a.props.dispatch;t({type:"configure/fetchAqzxData",payload:{url:a.state.aqzxUrl},callback:function(t){"404"!==t.reason?"click"===e&&r.default.success("\u5b89\u5168\u4e2d\u5fc3\u6570\u636e\u83b7\u53d6\u6210\u529f",.8):"click"===e&&r.default.warning("\u5b89\u5168\u4e2d\u5fc3\u6570\u636e\u83b7\u53d6\u5931\u8d25",.8);var n=JSON.stringify(t.result.list);a.setState({aqzxData:n})}})},a.saveAqzxAddr=function(){console.log("save aqzx address");var e=a.props.dispatch,t=(0,c.default)({},a.state.ownConfig,{aqzxUrl:a.state.aqzxUrl});console.log("^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"),console.log(t),e({type:"configure/saveOwnConfig",payload:{config:t},callback:function(e){r.default.success("\u5730\u5740\u4fdd\u5b58\u6210\u529f",.8)}})},a.modifyAqzxUrl=function(e){console.log(e.target.value),console.log("modifyAqzxUrl"),a.setState({aqzxUrl:e.target.value})},a._system_already_exist=function(e){var t=[];return JSON.parse(a.state.thirdConfig).map(function(e){console.log(e.unique),t.push(e.unique)}),console.log(t),console.log(e),t.indexOf(e.toString())},a.handleSelectChange=function(e){console.log(e),console.log(JSON.parse(a.state.thirdConfig)),-1===a._system_already_exist(e.key)?(a.setState({sys_name:e.label}),a.setState({sys_code:e.key}),a.setState({alreadyExist:!1})):(console.log("system already exist"),console.log(e.label),r.default.warning(e.label+"\u5df2\u5b58\u5728",.8),a.setState({alreadyExist:!0}))},a.handleAddApi=function(e){console.log(e.target.value),a.setState({sys_api:e.target.value})},a.handleAddGoto=function(e){console.log(e.target.value),a.setState({sys_goto:e.target.value})},a.handleAddIconName=function(e){console.log(e.target.value),a.setState({sys_icon_name:e.target.value}),a.setState({icon_name_err:"display"})},a.showModifyModal=function(e){console.log("------------"),JSON.parse(a.state.thirdConfig).map(function(t){t.name===e&&(console.log(t),a.setState({modifyThirdName:e,modifyThirdCode:t.unique,modifyThirdApi:t.api,modifyThirdGoto:t.goto,modifyThirdIcon:t.icon}))}),a.setState({modifyVisible:!0}),console.log("modal:",e)},a.handleModifyOk=function(){console.log("modify ok"),a.setState({modifyVisible:!1});var e=[];JSON.parse(a.state.thirdConfig).map(function(t){t.name===a.state.modifyThirdName?e.push({name:a.state.modifyThirdName,unique:a.state.modifyThirdCode,api:a.state.modifyThirdApi,goto:a.state.modifyThirdGoto,icon:a.state.modifyThirdIcon}):e.push(t)}),a.setState({thirdConfig:b.plain(e)})},a.handleModifyCancel=function(){console.log("modify cancel"),a.setState({modifyVisible:!1})},a.handleModifyApi=function(e){console.log(e.target.value),a.setState({modifyThirdApi:e.target.value})},a.handleModifyGoto=function(e){console.log(e.target.value),a.setState({modifyThirdGoto:e.target.value})},a.handleModifyIconName=function(e){console.log(e.target.value),a.setState({modifyThirdIcon:e.target.value})},a.showDeleteModal=function(e){a.setState({deleteVisible:!0,deleteThirdName:e})},a.deleteThird=function(e){var t=[];JSON.parse(a.state.thirdConfig).map(function(a){a.name!==e&&t.push(a)}),a.setState({thirdConfig:b.plain(t)})},a.handleDeleteOk=function(){a.setState({deleteVisible:!1}),a.deleteThird(a.state.deleteThirdName),console.log("delete ok")},a.handleDeleteCancel=function(){a.setState({deleteVisible:!1}),console.log("delete cancel")},a.getThirdData=function(){var e=[];return JSON.parse(a.state.thirdConfig).map(function(t){e.push((0,c.default)({key:t.unique},t))}),e},a}return(0,p.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){console.log("componentDidMount"),this.handleFetchThirdConfig(),this.handleFetchOwnConfig()}},{key:"componentWillReceiveProps",value:function(e){this.props.configure.thirdConfig===e.configure.thirdConfig&&this.props.configure.thirdConfig===this.state.thirdConfig||""===e.configure.thirdConfig||this.setState({thirdConfig:b.plain(e.configure.thirdConfig)})}},{key:"render",value:function(){var e=this,t=this.props.loading,a=JSON.parse(this.state.aqzxData),n=[{title:"\u7cfb\u7edf",dataIndex:"name",key:"name"},{title:"\u7f16\u7801",dataIndex:"unique",key:"code"},{title:"\u56fe\u6807\u540d\u79f0",dataIndex:"icon",key:"icon"},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){var n=t.name;return x.default.createElement("div",null,x.default.createElement("a",{onClick:e.showModifyModal.bind(e,n)},"\u4fee\u6539"),x.default.createElement("a",{onClick:e.showDeleteModal.bind(e,n),style:{marginLeft:"12px"}},"\u5220\u9664"))}}];return console.log("=======>"),console.log(JSON.parse(this.state.thirdConfig)),console.log(this.state.icon_name_err),x.default.createElement(E.default,{title:"SmartLinkey \u5e94\u7528\u5b50\u7cfb\u7edf"},x.default.createElement(o.default,{bordered:!1,loading:t},x.default.createElement(s.default,{title:"\u6dfb\u52a0\u5b50\u7cfb\u7edf",visible:this.state.addVisible,onOk:this.handleAddOk,onCancel:this.handleAddCancel},"\u9009\u62e9\u5b50\u7cfb\u7edf\uff1a",x.default.createElement(v.default,{labelInValue:!0,value:{key:this.state.sys_name},style:{width:150},onChange:this.handleSelectChange},a.map(function(e){return x.default.createElement(q,{key:e.code,value:e.code},e.name)})),x.default.createElement("br",null),x.default.createElement("br",null),x.default.createElement("p",null,"\u63a5\u53e3\u5730\u5740\uff1a",x.default.createElement(_.default,{type:"text",value:this.state.sys_api,onChange:function(t){e.handleAddApi(t)}})),x.default.createElement("p",null,"\u8df3\u8f6c\u5730\u5740\uff1a",x.default.createElement(_.default,{type:"text",value:this.state.sys_goto,onChange:function(t){e.handleAddGoto(t)}})),x.default.createElement("p",null,"\u56fe\u6807\u540d\u79f0 ",x.default.createElement("span",{style:{color:"red",fontSize:"10px"}},"(* \u4ec5\u652f\u6301\u8f93\u5165\u82f1\u6587)"),"\uff1a",x.default.createElement(_.default,{type:"text",value:this.state.sys_icon_name,onChange:function(t){e.handleAddIconName(t)}}))),x.default.createElement(s.default,{title:"\u4fee\u6539\u5b50\u7cfb\u7edf",visible:this.state.modifyVisible,onOk:this.handleModifyOk,onCancel:this.handleModifyCancel},"\u9009\u62e9\u5b50\u7cfb\u7edf\uff1a",x.default.createElement(v.default,{labelInValue:!0,disabled:!0,value:{key:this.state.modifyThirdName},style:{width:150},onChange:this.handleSelectChange},a.map(function(e){return x.default.createElement(q,{key:e.code,value:e.code},e.name)})),x.default.createElement("br",null),x.default.createElement("br",null),x.default.createElement("p",null,"\u63a5\u53e3\u5730\u5740\uff1a",x.default.createElement(_.default,{type:"text",value:this.state.modifyThirdApi,onChange:function(t){e.handleModifyApi(t)}})),x.default.createElement("p",null,"\u8df3\u8f6c\u5730\u5740\uff1a",x.default.createElement(_.default,{type:"text",value:this.state.modifyThirdGoto,onChange:function(t){e.handleModifyGoto(t)}})),x.default.createElement("p",null,"\u56fe\u6807\u540d\u79f0 ",x.default.createElement("span",{style:{color:"red",fontSize:"10px"}},"(* \u4ec5\u652f\u6301\u8f93\u5165\u82f1\u6587)"),"\uff1a",x.default.createElement(_.default,{type:"text",value:this.state.modifyThirdIcon,onChange:function(t){e.handleModifyIconName(t)}}))),x.default.createElement(s.default,{title:"\u5220\u9664\u5b50\u7cfb\u7edf",visible:this.state.deleteVisible,onOk:this.handleDeleteOk,onCancel:this.handleDeleteCancel},x.default.createElement("p",null,"\u786e\u8ba4\u5220\u9664[",this.state.deleteThirdName,"]\u5b50\u7cfb\u7edf\u914d\u7f6e\uff1f")),x.default.createElement(A,null),"\u5b89\u5168\u4e2d\u5fc3\u5730\u5740\uff1a",x.default.createElement(_.default,{value:this.state.aqzxUrl,onChange:function(t){e.modifyAqzxUrl(t)}}),x.default.createElement(d.default,{type:"primary",onClick:this.getAqzxAndQuery.bind(this,"click"),style:{margin:"8px"}},"\u4ece\u5b89\u5168\u4e2d\u5fc3\u83b7\u53d6\u5b50\u7cfb\u7edf\u4fe1\u606f"),x.default.createElement(d.default,{type:"primary",onClick:this.saveAqzxAddr,style:{margin:"8px"}},"\u4fdd\u5b58\u5730\u5740"),x.default.createElement(T,{rows:8,value:this.state.aqzxData}),x.default.createElement(d.default,{type:"primary",onClick:this.showAddModal,style:{margin:"8px"}},"\u6dfb\u52a0"),x.default.createElement(i.default,{dataSource:this.getThirdData(),columns:n}),x.default.createElement(d.default,{type:"primary",onClick:this.handleFetchThirdConfig.bind(this,"click"),style:{marginLeft:"8px",marginTop:"8px"}},"\u91cd\u8f7d\u914d\u7f6e"),x.default.createElement(d.default,{type:"primary",onClick:this.handleSaveThirdConfig,style:{marginLeft:"8px",marginTop:"8px"}},"\u4fdd\u5b58\u914d\u7f6e")))}}]),t}(x.Component))||S),w=O;t.default=w}}]);